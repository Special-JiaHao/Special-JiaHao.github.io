{
    "version": "https://jsonfeed.org/version/1",
    "title": "繁華落盡 似水流年 • All posts by \"python\" tag",
    "description": "编程日记 & 随笔",
    "home_page_url": "http://example.com",
    "items": [
        {
            "id": "http://example.com/value/Python/grpc%20for%20python",
            "url": "http://example.com/value/Python/grpc%20for%20python",
            "title": "gRPC for Python",
            "date_published": "2024-04-09T16:00:00.000Z",
            "content_html": "<h2 id=\"grpc介绍\"><a class=\"anchor\" href=\"#grpc介绍\">#</a>  <code>gRPC</code>  介绍</h2>\n<blockquote>\n<p>“gRPC is a modern open source high performance RPC framework that can run in any environment. It can efficiently connect services in and across data centers with pluggable support for load balancing, tracing, health checking and authentication. It is also applicable in last mile of distributed computing to connect devices, mobile applications and browsers to backend services.”</p>\n</blockquote>\n<ul>\n<li>On the server side, the server implements this interface and runs a gRPC server to handle client calls.</li>\n<li>On the client side, the client has a stub (referred to as just a client in some languages) that provides the same methods as the server.</li>\n</ul>\n<p><img data-src=\"https://grpc.io/img/landing-2.svg\" alt=\"\" /></p>\n<h2 id=\"环境搭建\"><a class=\"anchor\" href=\"#环境搭建\">#</a> 环境搭建</h2>\n<ol>\n<li>\n<p>创建一个用于 <code>gRPC</code>  的虚拟环境</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>conda create <span class=\"token parameter variable\">-n</span> grcp_py <span class=\"token assign-left variable\">python</span><span class=\"token operator\">=</span><span class=\"token number\">3.10</span></pre></td></tr></table></figure></li>\n<li>\n<p>激活虚拟环境，并进入到项目目录下方</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>conda activate grpc_py</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">mkdir</span> grpc</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin class-name\">cd</span> grpc</pre></td></tr></table></figure></li>\n<li>\n<p>安装 <code>gRPC</code>  第三方库及其依赖</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pip <span class=\"token function\">install</span> grpcio</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>pip <span class=\"token function\">install</span> grpcio-tools</pre></td></tr></table></figure></li>\n</ol>\n<h2 id=\"示例一-helloworld\"><a class=\"anchor\" href=\"#示例一-helloworld\">#</a> 示例一: HelloWorld</h2>\n<h3 id=\"功能\"><a class=\"anchor\" href=\"#功能\">#</a> 功能</h3>\n<ul>\n<li>客户端调用服务端</li>\n</ul>\n<h3 id=\"protobuf协议结构\"><a class=\"anchor\" href=\"#protobuf协议结构\">#</a> protobuf 协议结构</h3>\n<figure class=\"highlight protobuf\"><figcaption data-lang=\"Protocol Buffers\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">syntax</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"proto3\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">package</span> helloworld<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// The greeting service definition.</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">service</span> <span class=\"token class-name\">Greeter</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token comment\">//  远程过程调用的接口</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">rpc</span> <span class=\"token function\">SayHello</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">HelloRequest</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">returns</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">HelloReply</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\t<span class=\"token comment\">// 调用 SayHello ()</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\">// 交互的消息体</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">message</span> <span class=\"token class-name\">HelloRequest</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>  <span class=\"token builtin\">string</span> name <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">message</span> <span class=\"token class-name\">HelloReply</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token builtin\">string</span> message <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"简单的客户端-服务端\"><a class=\"anchor\" href=\"#简单的客户端-服务端\">#</a> 简单的客户端、服务端</h3>\n<ul>\n<li><strong>服务端</strong></li>\n</ul>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> concurrent <span class=\"token keyword\">import</span> futures\t<span class=\"token comment\"># 提供线程池</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> grpc</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> helloworld_pb2</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> helloworld_pb2_grpc</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Greeter</span><span class=\"token punctuation\">(</span>helloworld_pb2_grpc<span class=\"token punctuation\">.</span>GreeterServicer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">SayHello</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">return</span> helloworld_pb2<span class=\"token punctuation\">.</span>HelloReply<span class=\"token punctuation\">(</span>message<span class=\"token operator\">=</span><span class=\"token string\">\"Hello, %s!\"</span> <span class=\"token operator\">%</span> request<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">serve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    port <span class=\"token operator\">=</span> <span class=\"token string\">\"50051\"</span>\t<span class=\"token comment\"># 服务端的端口号</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    server <span class=\"token operator\">=</span> grpc<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">(</span>futures<span class=\"token punctuation\">.</span>ThreadPoolExecutor<span class=\"token punctuation\">(</span>max_workers<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\t<span class=\"token comment\"># 创建 grpc 服务端对象</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    helloworld_pb2_grpc<span class=\"token punctuation\">.</span>add_GreeterServicer_to_server<span class=\"token punctuation\">(</span>Greeter<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> server<span class=\"token punctuation\">)</span>\t<span class=\"token comment\"># 将重写的服务接口注册到当前服务器上</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    server<span class=\"token punctuation\">.</span>add_insecure_port<span class=\"token punctuation\">(</span><span class=\"token string\">\"[::]:\"</span> <span class=\"token operator\">+</span> port<span class=\"token punctuation\">)</span>\t<span class=\"token comment\"># 设置端口</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    server<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\t<span class=\"token comment\"># 开启服务，多线程开启</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Server started, listening on \"</span> <span class=\"token operator\">+</span> port<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    server<span class=\"token punctuation\">.</span>wait_for_termination<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\t<span class=\"token comment\"># 堵塞</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">\"__main__\"</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    serve<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><ul>\n<li><strong>客户端</strong></li>\n</ul>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> grpc</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> helloworld_pb2</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> helloworld_pb2_grpc</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Will try to greet world ...\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">with</span> grpc<span class=\"token punctuation\">.</span>insecure_channel<span class=\"token punctuation\">(</span><span class=\"token string\">\"服务端ip:服务端端口\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> channel<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        stub <span class=\"token operator\">=</span> helloworld_pb2_grpc<span class=\"token punctuation\">.</span>GreeterStub<span class=\"token punctuation\">(</span>channel<span class=\"token punctuation\">)</span>\t\t<span class=\"token comment\"># 调用 GreeterStub 方法去调用远程计算机的 Greeter 服务</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        response <span class=\"token operator\">=</span> stub<span class=\"token punctuation\">.</span>SayHello<span class=\"token punctuation\">(</span>helloworld_pb2<span class=\"token punctuation\">.</span>HelloRequest<span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"you\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\t<span class=\"token comment\"># 调用 Greeter 服务下的 SayHello 方法</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Greeter client received: \"</span> <span class=\"token operator\">+</span> response<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">\"__main__\"</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    run<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h3 id=\"with-flection\"><a class=\"anchor\" href=\"#with-flection\">#</a> with flection</h3>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pip <span class=\"token function\">install</span> grpcio-reflection</pre></td></tr></table></figure><figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> concurrent <span class=\"token keyword\">import</span> futures</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> grpc</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> grpc_reflection<span class=\"token punctuation\">.</span>v1alpha <span class=\"token keyword\">import</span> reflection</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> helloworld_pb2</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> helloworld_pb2_grpc</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Greeter</span><span class=\"token punctuation\">(</span>helloworld_pb2_grpc<span class=\"token punctuation\">.</span>GreeterServicer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">SayHello</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">return</span> helloworld_pb2<span class=\"token punctuation\">.</span>HelloReply<span class=\"token punctuation\">(</span>message<span class=\"token operator\">=</span><span class=\"token string\">\"Hello, %s!\"</span> <span class=\"token operator\">%</span> request<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">serve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    server <span class=\"token operator\">=</span> grpc<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">(</span>futures<span class=\"token punctuation\">.</span>ThreadPoolExecutor<span class=\"token punctuation\">(</span>max_workers<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    helloworld_pb2_grpc<span class=\"token punctuation\">.</span>add_GreeterServicer_to_server<span class=\"token punctuation\">(</span>Greeter<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> server<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    SERVICE_NAMES <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        helloworld_pb2<span class=\"token punctuation\">.</span>DESCRIPTOR<span class=\"token punctuation\">.</span>services_by_name<span class=\"token punctuation\">[</span><span class=\"token string\">\"Greeter\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>full_name<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        reflection<span class=\"token punctuation\">.</span>SERVICE_NAME<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    reflection<span class=\"token punctuation\">.</span>enable_server_reflection<span class=\"token punctuation\">(</span>SERVICE_NAMES<span class=\"token punctuation\">,</span> server<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    server<span class=\"token punctuation\">.</span>add_insecure_port<span class=\"token punctuation\">(</span><span class=\"token string\">\"[::]:50051\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    server<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    server<span class=\"token punctuation\">.</span>wait_for_termination<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">\"__main__\"</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    serve<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h3 id=\"异步客户端-服务端\"><a class=\"anchor\" href=\"#异步客户端-服务端\">#</a> 异步客户端、服务端</h3>\n<ul>\n<li><strong>服务端</strong></li>\n</ul>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> asyncio</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> grpc</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> helloworld_pb2</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> helloworld_pb2_grpc</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Greeter</span><span class=\"token punctuation\">(</span>helloworld_pb2_grpc<span class=\"token punctuation\">.</span>GreeterServicer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">async</span> <span class=\"token keyword\">def</span> <span class=\"token function\">SayHello</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        self<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        request<span class=\"token punctuation\">:</span> helloworld_pb2<span class=\"token punctuation\">.</span>HelloRequest<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        context<span class=\"token punctuation\">:</span> grpc<span class=\"token punctuation\">.</span>aio<span class=\"token punctuation\">.</span>ServicerContext<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> helloworld_pb2<span class=\"token punctuation\">.</span>HelloReply<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">return</span> helloworld_pb2<span class=\"token punctuation\">.</span>HelloReply<span class=\"token punctuation\">(</span>message<span class=\"token operator\">=</span><span class=\"token string\">\"Hello, %s!\"</span> <span class=\"token operator\">%</span> request<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">async</span> <span class=\"token keyword\">def</span> <span class=\"token function\">serve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    server <span class=\"token operator\">=</span> grpc<span class=\"token punctuation\">.</span>aio<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    helloworld_pb2_grpc<span class=\"token punctuation\">.</span>add_GreeterServicer_to_server<span class=\"token punctuation\">(</span>Greeter<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> server<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    listen_addr <span class=\"token operator\">=</span> <span class=\"token string\">\"[::]:50051\"</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    server<span class=\"token punctuation\">.</span>add_insecure_port<span class=\"token punctuation\">(</span>listen_addr<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    logging<span class=\"token punctuation\">.</span>info<span class=\"token punctuation\">(</span><span class=\"token string\">\"Starting server on %s\"</span><span class=\"token punctuation\">,</span> listen_addr<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">await</span> server<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">await</span> server<span class=\"token punctuation\">.</span>wait_for_termination<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">\"__main__\"</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    asyncio<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span>serve<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h2 id=\"参考\"><a class=\"anchor\" href=\"#参考\">#</a> 参考</h2>\n<ul>\n<li>[1] <span class=\"exturl\" data-url=\"aHR0cHM6Ly9ncnBjLmlvL2RvY3MvbGFuZ3VhZ2VzL3B5dGhvbi9xdWlja3N0YXJ0Lw==\">gRPC</span></li>\n<li>[2] [Github for gRPC][<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL2dycGMvZ3JwYw==\">https://github.com/grpc/grpc</span>]</li>\n</ul>\n",
            "tags": [
                "Python"
            ]
        }
    ]
}