{
    "version": "https://jsonfeed.org/version/1",
    "title": "繁華落盡 似水流年 • All posts by \"grpc\" category",
    "description": "编程日记 & 随笔",
    "home_page_url": "http://example.com",
    "items": [
        {
            "id": "http://example.com/value/grpc%20for%20python",
            "url": "http://example.com/value/grpc%20for%20python",
            "title": "GRPC for Python",
            "date_published": "2024-04-09T16:00:00.000Z",
            "content_html": "<h2 id=\"helloworld\"><a class=\"anchor\" href=\"#helloworld\">#</a> Helloworld</h2>\n<h3 id=\"protobuf协议结构\"><a class=\"anchor\" href=\"#protobuf协议结构\">#</a> protobuf 协议结构</h3>\n<figure class=\"highlight protobuf\"><figcaption data-lang=\"Protocol Buffers\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">syntax</span> <span class=\"token operator\">=</span> <span class=\"token string\">\"proto3\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">package</span> helloworld<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">// The greeting service definition.</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">service</span> <span class=\"token class-name\">Greeter</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>  <span class=\"token comment\">//  远程过程调用的接口</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>  <span class=\"token keyword\">rpc</span> <span class=\"token function\">SayHello</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">HelloRequest</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">returns</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">HelloReply</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span>\t<span class=\"token comment\">// 调用 SayHello ()</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>  <span class=\"token keyword\">rpc</span> <span class=\"token function\">SayHelloStreamReply</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">HelloRequest</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">returns</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">stream</span> <span class=\"token class-name\">HelloReply</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>  <span class=\"token keyword\">rpc</span> <span class=\"token function\">SayHelloBidiStream</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">stream</span> <span class=\"token class-name\">HelloRequest</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">returns</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">stream</span> <span class=\"token class-name\">HelloReply</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">// 交互的消息体</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">message</span> <span class=\"token class-name\">HelloRequest</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>  <span class=\"token builtin\">string</span> name <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">message</span> <span class=\"token class-name\">HelloReply</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>  <span class=\"token builtin\">string</span> message <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h3 id=\"简单的客户端-服务端\"><a class=\"anchor\" href=\"#简单的客户端-服务端\">#</a> 简单的客户端、服务端</h3>\n<ul>\n<li><strong>服务端</strong></li>\n</ul>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> concurrent <span class=\"token keyword\">import</span> futures\t<span class=\"token comment\"># 提供线程池</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> grpc</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> helloworld_pb2</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> helloworld_pb2_grpc</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Greeter</span><span class=\"token punctuation\">(</span>helloworld_pb2_grpc<span class=\"token punctuation\">.</span>GreeterServicer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">SayHello</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token keyword\">return</span> helloworld_pb2<span class=\"token punctuation\">.</span>HelloReply<span class=\"token punctuation\">(</span>message<span class=\"token operator\">=</span><span class=\"token string\">\"Hello, %s!\"</span> <span class=\"token operator\">%</span> request<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">serve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    port <span class=\"token operator\">=</span> <span class=\"token string\">\"50051\"</span>\t<span class=\"token comment\"># 服务端的端口号</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    server <span class=\"token operator\">=</span> grpc<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">(</span>futures<span class=\"token punctuation\">.</span>ThreadPoolExecutor<span class=\"token punctuation\">(</span>max_workers<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\t<span class=\"token comment\"># 创建 grpc 服务端对象</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    helloworld_pb2_grpc<span class=\"token punctuation\">.</span>add_GreeterServicer_to_server<span class=\"token punctuation\">(</span>Greeter<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> server<span class=\"token punctuation\">)</span>\t<span class=\"token comment\"># 将重写的服务接口注册到当前服务器上</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    server<span class=\"token punctuation\">.</span>add_insecure_port<span class=\"token punctuation\">(</span><span class=\"token string\">\"[::]:\"</span> <span class=\"token operator\">+</span> port<span class=\"token punctuation\">)</span>\t<span class=\"token comment\"># 设置端口</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    server<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\t<span class=\"token comment\"># 开启服务，多线程开启</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Server started, listening on \"</span> <span class=\"token operator\">+</span> port<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    server<span class=\"token punctuation\">.</span>wait_for_termination<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\t<span class=\"token comment\"># 堵塞</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">\"__main__\"</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    serve<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><ul>\n<li><strong>客户端</strong></li>\n</ul>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> grpc</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> helloworld_pb2</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> helloworld_pb2_grpc</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Will try to greet world ...\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">with</span> grpc<span class=\"token punctuation\">.</span>insecure_channel<span class=\"token punctuation\">(</span><span class=\"token string\">\"服务端ip:服务端端口\"</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> channel<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        stub <span class=\"token operator\">=</span> helloworld_pb2_grpc<span class=\"token punctuation\">.</span>GreeterStub<span class=\"token punctuation\">(</span>channel<span class=\"token punctuation\">)</span>\t\t<span class=\"token comment\"># 调用 GreeterStub 方法去调用远程计算机的 Greeter 服务</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        response <span class=\"token operator\">=</span> stub<span class=\"token punctuation\">.</span>SayHello<span class=\"token punctuation\">(</span>helloworld_pb2<span class=\"token punctuation\">.</span>HelloRequest<span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"you\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\t<span class=\"token comment\"># 调用 Greeter 服务下的 SayHello 方法</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Greeter client received: \"</span> <span class=\"token operator\">+</span> response<span class=\"token punctuation\">.</span>message<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">\"__main__\"</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    run<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h3 id=\"with-flection\"><a class=\"anchor\" href=\"#with-flection\">#</a> with flection</h3>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pip <span class=\"token function\">install</span> grpcio-reflection</pre></td></tr></table></figure><figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> concurrent <span class=\"token keyword\">import</span> futures</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> grpc</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> grpc_reflection<span class=\"token punctuation\">.</span>v1alpha <span class=\"token keyword\">import</span> reflection</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> helloworld_pb2</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">import</span> helloworld_pb2_grpc</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Greeter</span><span class=\"token punctuation\">(</span>helloworld_pb2_grpc<span class=\"token punctuation\">.</span>GreeterServicer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">SayHello</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">return</span> helloworld_pb2<span class=\"token punctuation\">.</span>HelloReply<span class=\"token punctuation\">(</span>message<span class=\"token operator\">=</span><span class=\"token string\">\"Hello, %s!\"</span> <span class=\"token operator\">%</span> request<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">serve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    server <span class=\"token operator\">=</span> grpc<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">(</span>futures<span class=\"token punctuation\">.</span>ThreadPoolExecutor<span class=\"token punctuation\">(</span>max_workers<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    helloworld_pb2_grpc<span class=\"token punctuation\">.</span>add_GreeterServicer_to_server<span class=\"token punctuation\">(</span>Greeter<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> server<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    SERVICE_NAMES <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        helloworld_pb2<span class=\"token punctuation\">.</span>DESCRIPTOR<span class=\"token punctuation\">.</span>services_by_name<span class=\"token punctuation\">[</span><span class=\"token string\">\"Greeter\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>full_name<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        reflection<span class=\"token punctuation\">.</span>SERVICE_NAME<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    reflection<span class=\"token punctuation\">.</span>enable_server_reflection<span class=\"token punctuation\">(</span>SERVICE_NAMES<span class=\"token punctuation\">,</span> server<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    server<span class=\"token punctuation\">.</span>add_insecure_port<span class=\"token punctuation\">(</span><span class=\"token string\">\"[::]:50051\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    server<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    server<span class=\"token punctuation\">.</span>wait_for_termination<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">\"__main__\"</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    serve<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h3 id=\"异步客户端-服务端\"><a class=\"anchor\" href=\"#异步客户端-服务端\">#</a> 异步客户端、服务端</h3>\n<ul>\n<li><strong>服务端</strong></li>\n</ul>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> asyncio</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> grpc</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> helloworld_pb2</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> helloworld_pb2_grpc</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Greeter</span><span class=\"token punctuation\">(</span>helloworld_pb2_grpc<span class=\"token punctuation\">.</span>GreeterServicer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">async</span> <span class=\"token keyword\">def</span> <span class=\"token function\">SayHello</span><span class=\"token punctuation\">(</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        self<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        request<span class=\"token punctuation\">:</span> helloworld_pb2<span class=\"token punctuation\">.</span>HelloRequest<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        context<span class=\"token punctuation\">:</span> grpc<span class=\"token punctuation\">.</span>aio<span class=\"token punctuation\">.</span>ServicerContext<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> helloworld_pb2<span class=\"token punctuation\">.</span>HelloReply<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">return</span> helloworld_pb2<span class=\"token punctuation\">.</span>HelloReply<span class=\"token punctuation\">(</span>message<span class=\"token operator\">=</span><span class=\"token string\">\"Hello, %s!\"</span> <span class=\"token operator\">%</span> request<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">async</span> <span class=\"token keyword\">def</span> <span class=\"token function\">serve</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token boolean\">None</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    server <span class=\"token operator\">=</span> grpc<span class=\"token punctuation\">.</span>aio<span class=\"token punctuation\">.</span>server<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    helloworld_pb2_grpc<span class=\"token punctuation\">.</span>add_GreeterServicer_to_server<span class=\"token punctuation\">(</span>Greeter<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> server<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    listen_addr <span class=\"token operator\">=</span> <span class=\"token string\">\"[::]:50051\"</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    server<span class=\"token punctuation\">.</span>add_insecure_port<span class=\"token punctuation\">(</span>listen_addr<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    logging<span class=\"token punctuation\">.</span>info<span class=\"token punctuation\">(</span><span class=\"token string\">\"Starting server on %s\"</span><span class=\"token punctuation\">,</span> listen_addr<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    <span class=\"token keyword\">await</span> server<span class=\"token punctuation\">.</span>start<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">await</span> server<span class=\"token punctuation\">.</span>wait_for_termination<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">\"__main__\"</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    asyncio<span class=\"token punctuation\">.</span>run<span class=\"token punctuation\">(</span>serve<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure>",
            "tags": [
                "Python"
            ]
        },
        {
            "id": "http://example.com/value/grpc%20for%20C++",
            "url": "http://example.com/value/grpc%20for%20C++",
            "title": "GRPC for C++",
            "date_published": "2024-04-09T08:00:34.000Z",
            "content_html": "<h1 id=\"grpc-for-c\"><a class=\"anchor\" href=\"#grpc-for-c\">#</a> GRPC For C++</h1>\n<h2 id=\"what-is-rpc\"><a class=\"anchor\" href=\"#what-is-rpc\">#</a> What is RPC？</h2>\n<p><code>RPC(Remote Procedure Call)</code> ，远程过程调用，一种通过网络调用远程计算机的服务，而不需要了解底层网络技术的协议，使调用者可以像调用本地服务一样调用远程的方法。主要用于分布式服务器之间的通信，微服务</p>\n<h3 id=\"rpc框架\"><a class=\"anchor\" href=\"#rpc框架\">#</a> RPC 框架</h3>\n<ul>\n<li><code>Dobbo</code></li>\n<li><code>Motan</code></li>\n<li><code>Tars</code></li>\n<li><code>SpringCloud</code></li>\n<li><code>gRPC</code></li>\n<li><code>Thrift</code></li>\n</ul>\n<h3 id=\"rpc特性\"><a class=\"anchor\" href=\"#rpc特性\">#</a> RPC 特性</h3>\n<ol>\n<li><code>RPC</code>  是基于 <code>HTTP2</code>  协议的，使用的是长连接，不需要每次通信</li>\n</ol>\n<h2 id=\"windows编译grpc-for-qt\"><a class=\"anchor\" href=\"#windows编译grpc-for-qt\">#</a> Windows 编译 grpc for QT</h2>\n<ol>\n<li>\n<p>通过 <code>git</code>  把 <code>github</code>  下的 <code>grpc</code>  源码 clone 下来</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token function\">git</span> clone --recurse-submodules <span class=\"token parameter variable\">-b</span> --shallow-submodules https://github.com/grpc/grpc</pre></td></tr></table></figure></li>\n<li>\n<p>下载 <code>Qt</code></p>\n<p>Qt 官方网址：<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cucXQuaW8vZG93bmxvYWQtb3Blbi1zb3VyY2UlRUYlQkMlOEMlRTQlQjglOEIlRTglQkQlQkQlRTUlQkMlODAlRTYlQkElOTAlRTclODklODglRTYlOUMlQUMlRUYlQkMlODglRTUlODUlOEQlRTglQjQlQjklRUYlQkMlODk=\">https://www.qt.io/download-open-source，下载开源版本（免费）</span>.</p>\n<p><img data-src=\"https://raw.githubusercontent.com/Special-JiaHao/images/main/Qt..png\" alt=\"\" /></p>\n</li>\n<li>\n<p>NASM</p>\n<p>NASM 官方网址：<span class=\"exturl\" data-url=\"aHR0cHM6Ly9uYXNtLnVzLw==\">NASM</span></p>\n<p><img data-src=\"https://raw.githubusercontent.com/Special-JiaHao/images/main/NASM.png\" alt=\"\" /></p>\n<p>设置 <code>NASM</code>  的环境变量：</p>\n<p><img data-src=\"https://raw.githubusercontent.com/Special-JiaHao/images/main/%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F.png\" alt=\"\" /></p>\n<p><img data-src=\"https://raw.githubusercontent.com/Special-JiaHao/images/main/nasm%E7%B3%BB%E7%BB%9F%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F.png\" alt=\"\" /></p>\n<p>这里面的环境变量为 <code>你安装NASM的目录</code> 。设置好了基本没什么问题，为了防止某些错误，你也可以测试一下.  <code>CMD</code>  用</p>\n<blockquote>\n<p>nasm --version</p>\n</blockquote>\n<p><img data-src=\"https://raw.githubusercontent.com/Special-JiaHao/images/main/nasm%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E6%B5%8B%E8%AF%95.png\" alt=\"\" /></p>\n</li>\n<li>\n<p>QT 构建 grpc</p>\n<p>打开 <code>Qt Creator</code> ，打开新的项目，然后选择 <code>你clone grpc的路径下方的CMakeLists.txt</code>  文件进行构建.</p>\n<p><img data-src=\"https://raw.githubusercontent.com/Special-JiaHao/images/main/Qt%E6%9E%84%E5%BB%BAgrpc1.png\" alt=\"\" /></p>\n<p><img data-src=\"https://raw.githubusercontent.com/Special-JiaHao/images/main/Qt%E6%9E%84%E5%BB%BAgrpc2.png\" alt=\"\" /></p>\n<p>最后就构建成功了！</p>\n<p><img data-src=\"https://raw.githubusercontent.com/Special-JiaHao/images/main/Qt%E6%9E%84%E5%BB%BAgrpc3.png\" alt=\"\" /></p>\n</li>\n</ol>\n<h2 id=\"参考\"><a class=\"anchor\" href=\"#参考\">#</a> 参考</h2>\n<ul>\n<li>[1] <span class=\"exturl\" data-url=\"aHR0cHM6Ly9ncnBjLmlvL2RvY3MvbGFuZ3VhZ2VzL2NwcC9xdWlja3N0YXJ0Lw==\">https://grpc.io/docs/languages/cpp/quickstart/</span></li>\n</ul>\n",
            "tags": [
                "C++"
            ]
        }
    ]
}