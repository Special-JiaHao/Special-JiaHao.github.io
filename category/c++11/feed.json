{
    "version": "https://jsonfeed.org/version/1",
    "title": "繁華落盡 似水流年 • All posts by \"c++11\" category",
    "description": "编程日记 & 随笔",
    "home_page_url": "http://example.com",
    "items": [
        {
            "id": "http://example.com/value/CPP/C++11",
            "url": "http://example.com/value/CPP/C++11",
            "title": "C++11新特性",
            "date_published": "2024-04-02T00:53:23.525Z",
            "content_html": "<h1 id=\"c11\"><a class=\"anchor\" href=\"#c11\">#</a>  <code>C++11</code></h1>\n<blockquote>\n<p><strong>C++11</strong> is the second major version of C++ and the most important update since C<ins>98. A large number of changes were introduced to both standardize existing practices and improve the abstractions available to the C</ins> programmers.</p>\n</blockquote>\n<h2 id=\"原始字面量\"><a class=\"anchor\" href=\"#原始字面量\">#</a> 原始字面量</h2>\n<p><code>C++11</code>  中定义原始字面量的方式： <code>R&quot;×××(原始字面量)×××&quot;</code> ，其中 <code>()</code>  两边的字符可以省略。原始字面量可以直接表示字符串的实际含义，而不需要额外的转义字符。以下三条语句是等效的：</p>\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>string path1 <span class=\"token operator\">=</span> <span class=\"token string\">\"D:\\\\Desktop\\\\tmp.txt\"</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>string path2 <span class=\"token operator\">=</span> <span class=\"token raw-string string\">R\"(D:\\Desktop\\tmp.txt)\"</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h2 id=\"指针空值类型nullptr\"><a class=\"anchor\" href=\"#指针空值类型nullptr\">#</a> 指针空值类型 <code>nullptr</code></h2>\n<p><code>nullptr</code>  是一个空指针类型，在 <code>C++</code>  中其可以隐式的转化为任何其他类型的空指针类型.</p>\n<blockquote>\n<p><code>NULL</code>  在 <code>C++</code>  中被定义为 0，这一点的设置主要是让目前的 C++ 兼容之前的 C 程序，0 可以隐式转化为其他类型的空指针类型。所以在 <code>C++</code>  程序中如果想要表达的是空指针，建议使用 <code>nullptr</code> ，如果使用 <code>NULL</code>  则可能导致出乎意料的结果.</p>\n</blockquote>\n<h2 id=\"常量表达式constexpr\"><a class=\"anchor\" href=\"#常量表达式constexpr\">#</a> 常量表达式 <code>constexpr</code></h2>\n<p><code>const</code>  在 <code>C++</code>  中有两个语义，变量只读和修饰常量。当 <code>const</code>  修饰常量时，其值在编译阶段就已经确定，而修饰变量时，则需要等到运行时才确定.  <code>C++</code>  为了区别这两种语义引入常量表达式 <code>constexpr</code> ，用于修饰常量，在编译阶段确定其值.</p>\n<p><code>constexpr</code>  可以用于修饰函数（常量表达式函数），可以用于修饰普通函数 / 类成员函数、类的构造函数、模版函数。修饰函数时，需要满足如下条件：</p>\n<ul>\n<li>函数必须有返回值，并且 <code>return</code>  返回的表达式必须是常量表达式</li>\n<li>整个函数体中不能出现非常量表达式之外语句</li>\n<li>修饰构造函数时，成员必须初始化，且初始化需要使用初始化列表</li>\n</ul>\n<h2 id=\"自动类型推导auto\"><a class=\"anchor\" href=\"#自动类型推导auto\">#</a> 自动类型推导 <code>auto</code></h2>\n<ul>\n<li><code>auto</code>  可以自动推导变量类型；使用 <code>auto</code>  声明的变量必须要进行初始化，以让编译器推导出它的实际类型，在编译阶段将 <code>auto</code>  占位符替换成其真正的类型.</li>\n<li>对于有 <code>const</code>  和 <code>volatile</code>  修饰的变量， <code>auto</code>  只能推断底层 <code>const</code>  或 <code>volatile</code> ，顶层 <code>const</code>  或 <code>volatile</code>  会被忽略，需要自己添加</li>\n<li>不能在函数的参数中使用，不能用于定义数组，不能用于类的非静态成员的初始化（只能用于类的静态常量成员变量的初始化）</li>\n<li>不能用于模版参数的类型推导</li>\n</ul>\n<h2 id=\"自动类型推导decltype\"><a class=\"anchor\" href=\"#自动类型推导decltype\">#</a> 自动类型推导 <code>decltype</code></h2>\n<blockquote>\n<p>我们希望从表达式（函数返回值）中推断出想要定义的变量的类型，但是却不想用表达式的值去初始化变量，这种情况 <code>auto</code>  显得无力了</p>\n</blockquote>\n<ul>\n<li>\n<p>推断表达式类型作为变量的定义类型</p>\n</li>\n<li>\n<p>推断函数返回值（实际不会调用，仅推断），推导出的对象类型与函数返回值一致</p>\n<blockquote>\n<p>当函数返回的是一个纯右值，需要忽略掉前面的 <code>const</code>  或 <code>volatile</code></p>\n</blockquote>\n</li>\n<li>\n<p>无论是底层 <code>const</code>  或 <code>volatile</code>  还是顶层 <code>const</code>  或 <code>volatile</code>  都会被保留</p>\n</li>\n<li>\n<p>表达式是一个左值，或者被 <code>()</code>  包围，使用 <code>decltype</code>  推导出来是表达式类型的引用（如果有 <code>const</code>  或 <code>volatile</code>  则需要加上）</p>\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">int</span> a <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">decltype</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span> b <span class=\"token operator\">=</span> a<span class=\"token punctuation\">;</span>\t\t<span class=\"token comment\">//b 的类型为 int</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">decltype</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> c <span class=\"token operator\">=</span> a<span class=\"token punctuation\">;</span>\t<span class=\"token comment\">//c 的类型为 int&amp;，绑定 a 对象</span></pre></td></tr></table></figure></li>\n</ul>\n<h2 id=\"返回值类型后置\"><a class=\"anchor\" href=\"#返回值类型后置\">#</a> 返回值类型后置</h2>\n<h2 id=\"final\"><a class=\"anchor\" href=\"#final\">#</a>  <code>final</code></h2>\n<ul>\n<li>当用于修饰类时，表示该类不能被继承， <code>final</code>  卸载类名后面</li>\n<li>当修饰成员函数时，只能修饰虚函数，表示这个虚函数不能被重写， <code>final</code>  写在函数后</li>\n</ul>\n<h2 id=\"override\"><a class=\"anchor\" href=\"#override\">#</a>  <code>override</code></h2>\n<p>明确表明派生类中的函数重写了基类的虚函数， <code>override</code>  写在派生类函数（重写了基类虚函数）后面.</p>\n<h2 id=\"函数模版默认模版参数\"><a class=\"anchor\" href=\"#函数模版默认模版参数\">#</a> 函数模版默认模版参数</h2>\n<p>在 <code>C++98/03</code>  标准中，类模版可以有默认的模版参数，如下：</p>\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">template</span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">typename</span> <span class=\"token class-name\">T</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">int</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Test</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">public</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token function\">Test</span><span class=\"token punctuation\">(</span>T tp<span class=\"token punctuation\">)</span> <span class=\"token operator\">:</span> <span class=\"token function\">a</span><span class=\"token punctuation\">(</span>tp<span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token keyword\">this</span><span class=\"token operator\">-></span>a <span class=\"token operator\">=</span> tp<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t<span class=\"token keyword\">void</span> <span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        cout <span class=\"token operator\">&lt;&lt;</span> <span class=\"token keyword\">this</span><span class=\"token operator\">-></span>a <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span>    </pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">private</span><span class=\"token operator\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    T a<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>Test<span class=\"token operator\">&lt;</span><span class=\"token operator\">></span> <span class=\"token function\">t1</span><span class=\"token punctuation\">(</span><span class=\"token number\">20.1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\t</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>t1<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\t\t\t<span class=\"token comment\">// 20</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>Test<span class=\"token operator\">&lt;</span><span class=\"token keyword\">double</span><span class=\"token operator\">></span> <span class=\"token function\">t2</span><span class=\"token punctuation\">(</span><span class=\"token number\">20.1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>t2<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\t\t\t<span class=\"token comment\">// 20.1</span></pre></td></tr></table></figure><p>但是不支持函数模版的默认模版参数， <code>C++11</code>  添加了对函数模版的默认参数的支持。当默认模版参数和模版参数自动推导同时使用时：</p>\n<ul>\n<li>如果可以推导出参数类型，则使用推导出的参数类型</li>\n<li>如果无法推导出参数类型，则使用模版默认的参数类型</li>\n</ul>\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">template</span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">typename</span> <span class=\"token class-name\">T</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">long</span> <span class=\"token keyword\">long</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">typename</span> <span class=\"token class-name\">U</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">int</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">func</span><span class=\"token punctuation\">(</span>T t <span class=\"token operator\">=</span> <span class=\"token char\">'A'</span><span class=\"token punctuation\">,</span> U u <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\tcout <span class=\"token operator\">&lt;&lt;</span> t <span class=\"token operator\">&lt;&lt;</span> <span class=\"token char\">' '</span> <span class=\"token operator\">&lt;&lt;</span> u <span class=\"token operator\">&lt;&lt;</span> endl<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>               <span class=\"token comment\">// func&lt;int, int></span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token generic-function\"><span class=\"token function\">func</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token char\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token char\">'b'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>        <span class=\"token comment\">//  func&lt;int, char></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token generic-function\"><span class=\"token function\">func</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token keyword\">char</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token char\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token char\">'b'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>       <span class=\"token comment\">// func&lt;char, char></span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token generic-function\"><span class=\"token function\">func</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token char\">'a'</span><span class=\"token punctuation\">,</span> <span class=\"token char\">'b'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>   <span class=\"token comment\">// func&lt;int, int></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token function\">func</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\t\t\t\t\t  <span class=\"token comment\">// func&lt;long long, int></span></pre></td></tr></table></figure><h2 id=\"using定义别名\"><a class=\"anchor\" href=\"#using定义别名\">#</a>  <code>using</code>  定义别名</h2>\n<p>在 <code>C++</code>  中，通过 <code>typedef</code>  重定义一个类型，语法格式为 <code>typedef 旧的类型名 新的类型名;</code>  通过 <code>using</code>  来定义类型别名语法格式 <code>using 新的类型 旧的类型;</code></p>\n<figure class=\"highlight cpp\"><figcaption data-lang=\"C++\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/* 给数据类型定义别名 */</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">typedef</span> <span class=\"token keyword\">long</span> <span class=\"token keyword\">long</span> ll<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">using</span> ll <span class=\"token operator\">=</span> <span class=\"token keyword\">long</span> <span class=\"token keyword\">long</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">/* 给函数指针定义别名 */</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">typedef</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>func<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">,</span> string<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">using</span> func <span class=\"token operator\">=</span> <span class=\"token keyword\">int</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">,</span> string<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">/* 给模版定义别名 */</span></pre></td></tr></table></figure><h2 id=\"委托构造函数\"><a class=\"anchor\" href=\"#委托构造函数\">#</a> 委托构造函数</h2>\n<h2 id=\"继承构造函数\"><a class=\"anchor\" href=\"#继承构造函数\">#</a> 继承构造函数</h2>\n<h2 id=\"列表初始化\"><a class=\"anchor\" href=\"#列表初始化\">#</a> 列表初始化</h2>\n<h2 id=\"参考博文\"><a class=\"anchor\" href=\"#参考博文\">#</a> 参考博文</h2>\n<ul>\n<li>[1] <span class=\"exturl\" data-url=\"aHR0cHM6Ly9zdWJpbmd3ZW4uY24vY2F0ZWdvcmllcy9DLw==\">爱编程的大丙 (subingwen.cn)</span></li>\n<li>[2] <span class=\"exturl\" data-url=\"aHR0cHM6Ly9lbi5jcHByZWZlcmVuY2UuY29tL3cvY3BwLzEx\">C++11 - cppreference.com</span></li>\n</ul>\n",
            "tags": [
                "C++"
            ]
        }
    ]
}